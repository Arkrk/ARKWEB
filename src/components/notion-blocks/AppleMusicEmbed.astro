---
export interface Props {
  url: URL
}
const { url } = Astro.props
const path = url.pathname.split('/')
const contentType = path[2]
const embedHeight = contentType === 'song' ? 175 : 450
---

<div class="apple-music">
  <iframe
    allow="autoplay *; encrypted-media *; fullscreen *; clipboard-write"
    frameborder="0"
    height={`${embedHeight}`}
    style="width:100%;overflow:hidden;border-radius:10px;"
    sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation"
    src={`https://embed.music.apple.com${url.pathname}`}
  />
</div>

<style>
  .apple-music {
    margin: 0.5rem 0;
  }
</style>